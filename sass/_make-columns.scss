/* make-columns */

// Loop indices are 0-based, :nth-x selectors are 1-based, take care

@mixin paginate($n, $slides-num) {
	> .slides > li {width: 100% / $n}

	> .arrows > label {
		display: none; // Hide all arrows by default
	}

	> .dots > label {
		display: none; // Hide all dots by default

		// Show the dots for each page
		&:nth-last-of-type(#{$n}), // The last page, the leftmost slide for all other pages (below)
		&:nth-of-type(#{$n}n-#{$n - 1}):not(:nth-last-of-type(-n+#{$n})) {
			display: inline;
		}
	}

	// For all possible checked radios
	@for $i from 0 to $slides-num {
		> input:nth-of-type(#{$i + 1}):checked {
			// Left arrow
			@if $i >= $n {
				~ .arrow:not(.right) > label:nth-of-type(#{($i - $i % $n) - $n + 1}) {
					display: block;
				}
			}

			// Right arrow
			~ .arrows:not(.left) > label:nth-of-type(#{($i - $i % $n) + $n + 1}) {
				display: block;
			}

			// For radios on all pages except the last
			&:not(:nth-last-of-type(-n+#{$n})) ~ .slides > li:first-of-type {
				margin-left: ($i - $i % $n) / $n * -100%; // Slide left by full page-widths
			}

			// For all radios on the last page
			@for $j from 0 to $n { // Nested loop! Keep this short
				&:nth-last-of-type(#{$n - $j}) ~ .slides > li:first-of-type {
					// Slide #{$i - $j} is always the left-most slide on the last page
					margin-left: ($i - $j) * -100% / $n; // Slide to the last page
				}
			}
		}
	}
}
